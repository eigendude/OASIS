From 8d048b939c5fd2665daf50445f3a044291bb0586 Mon Sep 17 00:00:00 2001
From: Ivan Santiago Paunovic <ivanpauno@ekumenlabs.com>
Date: Wed, 10 Aug 2022 15:18:39 -0300
Subject: [PATCH 3/4] Fix compressed_subscriber

Signed-off-by: Ivan Santiago Paunovic <ivanpauno@ekumenlabs.com>
---
 .../compressed_subscriber.h                           |  6 ------
 .../src/compressed_subscriber.cpp                     | 11 +----------
 2 files changed, 1 insertion(+), 16 deletions(-)

diff --git a/compressed_image_transport/include/compressed_image_transport/compressed_subscriber.h b/compressed_image_transport/include/compressed_image_transport/compressed_subscriber.h
index 03a7d0f..f551e61 100644
--- a/compressed_image_transport/include/compressed_image_transport/compressed_subscriber.h
+++ b/compressed_image_transport/include/compressed_image_transport/compressed_subscriber.h
@@ -55,12 +55,6 @@ public:
   }
 
 protected:
-  // Overridden to set up reconfigure server
-  void subscribeImpl(
-      rclcpp::Node * ,
-      const std::string& base_topic,
-      const Callback& callback,
-      rmw_qos_profile_t custom_qos) override;
 
   void subscribeImpl(
       rclcpp::Node * ,
diff --git a/compressed_image_transport/src/compressed_subscriber.cpp b/compressed_image_transport/src/compressed_subscriber.cpp
index 335bda8..4adf808 100644
--- a/compressed_image_transport/src/compressed_subscriber.cpp
+++ b/compressed_image_transport/src/compressed_subscriber.cpp
@@ -57,15 +57,6 @@ using CompressedImage = sensor_msgs::msg::CompressedImage;
 namespace compressed_image_transport
 {
 
-void CompressedSubscriber::subscribeImpl(
-    rclcpp::Node * node,
-    const std::string& base_topic,
-    const Callback& callback,
-    rmw_qos_profile_t custom_qos)
-{
-  this->subscribeImpl(node, base_topic, callback, custom_qos, rclcpp::SubscriptionOptions{});
-}
-
 void CompressedSubscriber::subscribeImpl(
     rclcpp::Node * node,
     const std::string& base_topic,
@@ -75,7 +66,7 @@ void CompressedSubscriber::subscribeImpl(
 {
     logger_ = node->get_logger();
     typedef image_transport::SimpleSubscriberPlugin<CompressedImage> Base;
-    Base::subscribeImplWithOptions(node, base_topic, callback, custom_qos, options);
+    Base::subscribeImpl(node, base_topic, callback, custom_qos, options);
     uint ns_len = node->get_effective_namespace().length();
     std::string param_base_name = base_topic.substr(ns_len);
     std::replace(param_base_name.begin(), param_base_name.end(), '/', '.');
-- 
2.34.1

